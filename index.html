<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sprinkle Saver</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* --- Game UI and Layout Styles --- */
    #game-container {
      background: none;
      border: none;
      box-shadow: none;
      width: 100vw;
      min-height: 100vh;
      margin: 0;
      padding: 0;
      position: absolute;
      top: 0;
      left: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      z-index: 2;
      pointer-events: none;
    }
    #game-ui {
      pointer-events: auto;
      background: none;
      box-shadow: none;
      width: 100vw;
      max-width: 100vw;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
      width: 90vw;
      max-width: 900px;
    }
    .lives {
      display: flex;
      gap: 8px;
      margin-left: 0;
    }
    .lives svg {
      width: 36px;
      height: 36px;
      stroke: #0055cc;
      stroke-width: 4px;
      fill: #4fc3f7;
      border-radius: 50%;
      background: #e3f2fd;
      box-shadow: 2px 2px 0 #1976d2;
    }
    .level-bar-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
    }
    .level-bar {
      background: #2196f3;
      border-radius: 18px;
      padding: 8px 40px;
      color: #fff;
      font-size: 1.5rem;
      font-weight: bold;
      letter-spacing: 2px;
      box-shadow: 0 2px 0 #1565c0;
      border: 4px solid #1976d2;
      margin-bottom: 4px;
      min-width: 180px;
      text-align: center;
    }
    .clouds-row {
      display: flex;
      justify-content: space-evenly;
      align-items: flex-end;
      margin: 32px 0 0 0;
      position: relative;
      z-index: 2;
      width: 90vw;
      max-width: 1200px;
      min-height: 220px;
    }
    .cloud-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 180px;
      position: relative;
    }
    .cloud-img {
      width: 200px;
      height: auto;
      margin-bottom: 0;
      filter: drop-shadow(0 6px 0 #1976d2);
    }
    .raindrops {
      display: flex;
      flex-direction: column;
      gap: 18px;
      margin-top: -10px;
      min-height: 160px;
      align-items: center;
    }
    .raindrop-img {
      width: 60px;
      height: 60px;
      filter: drop-shadow(0 6px 0 #1976d2);
    }
    .flowers-row {
      display: flex;
      justify-content: space-evenly;
      align-items: flex-end;
      position: fixed;
      bottom: 120px;
      left: 0;
      width: 100vw;
      z-index: 3;
      pointer-events: none;
      padding: 0 4vw;
    }
    .flower-group {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 16vw;
      min-width: 80px;
      max-width: 180px;
    }
    .flower-img {
      width: 120px;
      height: auto;
      filter: drop-shadow(0 4px 0 #388e3c);
      z-index: 3;
    }
    .butterfly-img {
      position: absolute;
      left: -50px;
      top: -70px;
      width: 90px;
      height: auto;
      z-index: 4;
      filter: drop-shadow(2px 2px 0 #fbc02d);
      pointer-events: none;
    }
    .grass-floor {
      position: fixed;
      left: 0;
      bottom: 0;
      width: 100vw;
      height: 120px;
      z-index: 2;
      pointer-events: none;
      background: transparent;
      display: flex;
      align-items: flex-end;
      justify-content: center;
    }
    .grass-img {
      width: 100vw;
      height: 120px;
      object-fit: cover;
      pointer-events: none;
      user-select: none;
      display: block;
    }
    @media (max-width: 800px) {
      #game-ui, #game-container { width: 100vw; min-width: 0; }
      .flowers-row, .clouds-row { padding: 0; }
      .cloud-img { width: 110px; }
      .raindrop-img { width: 36px; height: 36px; }
      .flower-img { width: 60px; }
      .butterfly-img { width: 40px; left: -20px; top: -30px; }
      .grass-img { height: 70px; }
      .flowers-row { bottom: 40px; }
    }
    /* --- Title Screen Styles --- */
    #title-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100vw;
      height: 100vh;
      background: url('img/clouds.jpg') no-repeat center center fixed;
      background-size: cover;
      position: relative;
      z-index: 10;
      text-align: center;
    }
    .title-screen-box {
      background: rgba(65, 168, 216, 0.8);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 4px 8px rgba(232, 227, 227, 0.2);
      backdrop-filter: blur(10px);
      margin-bottom: 32px;
    }
    .game-title {
      margin: 0;
      font-size: 3rem;
      letter-spacing: 2px;
      color: #fff;
      text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3);
      margin-bottom: 24px;
    }
    #start-btn {
      background: #369eda;
      color: #e6ecf1;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 1.2rem;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
      position: relative;
      z-index: 12;
    }
    #start-btn:hover {
      background: #41bbe3;
      transform: translateY(-2px);
    }
    #start-btn:active {
      transform: translateY(1px);
    }
    /* --- Touch Controls Styles --- */
    .touch-controls {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      flex-direction: row;
      gap: 16px;
    }
    .touch-btn {
      background: rgba(255, 255, 255, 0.8);
      border: none;
      border-radius: 8px;
      padding: 12px 16px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 80px;
      height: 80px;
      position: relative;
      overflow: hidden;
    }
    .touch-btn:hover {
      background: rgba(255, 255, 255, 1);
      transform: translateY(-2px);
    }
    .touch-btn:active {
      transform: translateY(1px);
    }
    /* --- Accessibility Styles --- */
    [role="region"] {
      border: 2px dashed #1976d2;
      padding: 8px;
      border-radius: 8px;
      margin-bottom: 16px;
    }
    [role="progressbar"] {
      background: #e3f2fd;
      border-radius: 8px;
      overflow: hidden;
      height: 24px;
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
    }
    #progress-bar {
      background: #4fc3f7;
      height: 100%;
      width: 0;
      transition: width 0.3s;
    }
    /* --- Hide touch controls on desktop --- */
    @media (min-width: 801px) {
      .touch-controls {
        display: none;
      }
    }
  </style>
</head>
<body>
  <header id="title-screen">
      <div class="title-screen-box">
        <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 28px;">
          <img src="img/logo.png" alt="Sprinkle Saver Logo Left" style="width: 80px; height: auto; filter: drop-shadow(0 2px 8px #1976d2aa);">
          <h1 class="game-title" style="margin: 0;">Sprinkle Saver</h1>
          <img src="img/logo.png" alt="Sprinkle Saver Logo Right" style="width: 80px; height: auto; filter: drop-shadow(0 2px 8px #1976d2aa);">
        </div>
        <button id="start-btn" class="start-btn">Start Game</button>
      </div>
      <div class="title-screen-box" style="margin-top: 32px; display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 48px; max-width: 1400px; margin-left: auto; margin-right: auto;">
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 32px;">
          <img src="img/img1.jpg" alt="happy girl" style="width: 300px; max-width: 32vw; height: auto; border-radius: 22px; box-shadow: 0 6px 32px #1976d255; margin-bottom: 0;">
          <img src="img/img3.png" alt="Charity: water logo" style="width: 300px; max-width: 28vw; height: auto; border-radius: 18px; box-shadow: 0 4px 18px #2196f355; margin-top: 0;">
        </div>
        <div style="flex: 1; min-width: 0; display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <h2 style="color:#1976d2; font-size:2rem; margin-bottom:16px; margin-top:0; text-align:center; letter-spacing:1px; text-shadow:0 2px 0 #fff, 0 4px 12px #b3e6ff;">Instructions</h2>
          <div style="color:#034d21; font-size:1.15rem; line-height:1.6; max-width:600px; text-align:left;">
            <strong>Sprinkle Saver: Game Manual</strong><br><br>
            <span style="font-size:1.3em;">üåßÔ∏è Mission Brief</span><br>
            It‚Äôs raining in the backyard, but the water tap is still on! As the brave butterfly, your quest is to cross the garden, dodge the downpour, and turn off the tap to help save water for the flowers. Every drop counts‚Äîshow the world you‚Äôre a true water hero!<br><br>
            <span style="font-size:1.15em; font-weight:bold;">üéÆ Controls</span><br>
            <strong>Move Left:</strong> A or Left Arrow<br>
            <strong>Move Right:</strong> D or Right Arrow<br>
            <strong>Turn off Tap:</strong> W or Up Arrow<br><br>
            <span style="font-size:1.15em; font-weight:bold;">ü¶ã How to Play</span><br>
            <strong>Leap Across the Flowers:</strong> The butterfly can only land on the flowers‚Äînever on the grass or in mid-air!<br>
            <strong>Dodge the Raindrops:</strong> Raindrops fall from the clouds above. Time your jumps to avoid getting soaked!<br>
            <strong>Watch Your Lives:</strong> You start with 3 hearts. Each time a raindrop hits you, you lose a heart. Lose all hearts and it‚Äôs game over!<br>
            <strong>Reach the Water Tap:</strong> Make it all the way across the backyard to the tap on the far right and turn it off to win the level!<br><br>
            <span style="font-size:1.15em; font-weight:bold;">üíß Pro Tips</span><br>
            Raindrops fall at different speeds and from different clouds‚Äîstay alert!<br>
            Plan your jumps and don‚Äôt rush. Sometimes patience is your best friend.<br>
            Every heart matters. Conserve them like you conserve water!<br><br>
            <span style="font-size:1.15em; font-weight:bold;">üåç Why It Matters</span><br>
            This game is inspired by charity: water. By turning off the tap when it‚Äôs raining, you help save water for those who need it most. Play smart, save water, and spread the word!<br><br>
            <strong>Ready? Flap your wings and save the day!</strong>
          </div>
        </div>
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 32px;">
          <img src="img/img2.jpg" alt="boy with water" style="width: 300px; max-width: 32vw; height: auto; border-radius: 22px; box-shadow: 0 6px 32px #1976d255; margin-bottom: 0;">
          <img src="img/img4.png" alt="Charity: water tap" style="width: 300px; max-width: 28vw; height: auto; border-radius: 18px; box-shadow: 0 4px 18px #2196f355; margin-top: 0;">
        </div>
      </div>
    </header>
  <main>
    <div id="game-container">
      <div id="game-ui">
        <!-- HUD Row: Hearts left, Level center -->
        <div class="hud-row" role="region" aria-label="Game HUD">
          <div class="hud-left">
            <div class="lives" aria-label="Lives left">
              <!-- SVG blue hearts for lives -->
              <svg viewBox="0 0 32 32"><path d="M16 29s-13-8.35-13-16.5S10.5 2 16 8.5 29 2 29 12.5 16 29 16 29z" fill="#4fc3f7" stroke="#1976d2" stroke-width="2"/></svg>
              <svg viewBox="0 0 32 32"><path d="M16 29s-13-8.35-13-16.5S10.5 2 16 8.5 29 2 29 12.5 16 29 16 29z" fill="#4fc3f7" stroke="#1976d2" stroke-width="2"/></svg>
              <svg viewBox="0 0 32 32"><path d="M16 29s-13-8.35-13-16.5S10.5 2 16 8.5 29 2 29 12.5 16 29 16 29z" fill="#4fc3f7" stroke="#1976d2" stroke-width="2"/></svg>
            </div>
          </div>
          <div class="hud-center">
            <div class="level-bar" aria-label="Level">Level 1</div>
            <div id="level-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
              <div id="progress-bar"></div>
            </div>
          </div>
          <div class="hud-right">
            <button id="reset-btn" class="reset-btn" aria-label="Reset Game" tabindex="0" title="Back to Main Menu">&#8634; Reset</button>
            <div id="game-timer" class="game-timer" aria-label="Timer" tabindex="0" style="margin-top: 8px; font-size: 1.3rem; color: #1976d2; font-weight: bold; text-align: right; padding: 8px 18px; min-width: 44px; min-height: 44px; display: inline-flex; align-items: center; justify-content: center; background: #e3f2fdcc; border-radius: 12px; box-shadow: 0 2px 8px #1976d222; letter-spacing: 1px;">00:00</div>
          </div>
        </div>
        <!-- Clouds and raindrops -->
        <div class="clouds-row">
          <div class="cloud-group">
            <img src="img/rainycloud.png" alt="Cloud" class="cloud-img">
          </div>
          <div class="cloud-group">
            <img src="img/rainycloud.png" alt="Cloud" class="cloud-img">
          </div>
          <div class="cloud-group">
            <img src="img/rainycloud.png" alt="Cloud" class="cloud-img">
          </div>
          <div class="cloud-group">
            <img src="img/rainycloud.png" alt="Cloud" class="cloud-img">
          </div>
        </div>
        <!-- Flowers and butterfly above the grass -->
        <div class="flowers-row">
          <div class="flower-group">
            <img src="img/flowers.png" class="flower-img" alt="Flower">
          </div>
          <div class="flower-group">
            <img src="img/flowers.png" class="flower-img" alt="Flower">
          </div>
          <div class="flower-group">
            <img src="img/flowers.png" class="flower-img" alt="Flower">
          </div>
          <div class="flower-group">
            <img src="img/flowers.png" class="flower-img" alt="Flower">
          </div>
          <div class="flower-group">
            <img src="img/flowers.png" class="flower-img" alt="Flower">
          </div>
          <!-- Butterfly is now a direct child of .flowers-row -->
          <img src="img/butterflyy.png" class="butterfly-img" id="butterfly" alt="Butterfly">
        </div>
        <!-- Grass floor at the very bottom -->
        <div class="grass-floor">
          <img src="img/grass.png" class="grass-img" alt="Grass Floor">
        </div>
        <!-- On-screen touch controls for mobile -->
        <div class="touch-controls" id="touch-controls" aria-label="Touch Controls">
          <button class="touch-btn" id="btn-left" aria-label="Move Left" tabindex="0">&#8592; Left</button>
          <button class="touch-btn" id="btn-jump" aria-label="Jump" tabindex="0">&#8593; Jump</button>
          <button class="touch-btn" id="btn-right" aria-label="Move Right" tabindex="0">Right &#8594;</button>
        </div>
      </div>
    </div>
  </main>
  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
</body>
</html>
